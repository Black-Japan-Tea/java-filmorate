## üé¨ Filmorate - –°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –¥–ª—è –∫–∏–Ω–æ–º–∞–Ω–æ–≤

**Filmorate** - —ç—Ç–æ —Å–µ—Ä–≤–∏—Å –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –∫–∏–Ω–æ, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π:
- –î–æ–±–∞–≤–ª—è—Ç—å —Ñ–∏–ª—å–º—ã –≤ –∫–∞—Ç–∞–ª–æ–≥
- –°—Ç–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫–∏ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–º—Å—è —Ñ–∏–ª—å–º–∞–º
- –ù–∞—Ö–æ–¥–∏—Ç—å –¥—Ä—É–∑–µ–π –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º
- –ü–æ–ª—É—á–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

---
![–°—Ö–µ–º–∞ –ë–î Filmorate](https://github.com/user-attachments/assets/a0494c45-7457-41db-be1a-610031c04280)
---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∂–∞–Ω—Ä–æ–≤ –∏ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤

## üé¨ –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### üìå –¢–∞–±–ª–∏—Ü—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### üé• `films` - –§–∏–ª—å–º—ã
- `film_id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–∏–ª—å–º–∞ (–ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á)
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ (–º–∞–∫—Å–∏–º—É–º 200 —Å–∏–º–≤–æ–ª–æ–≤)
- `release_date` - –î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞ (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- `duration` - –ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- `mpa_rate` - –í–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ä–µ–π—Ç–∏–Ω–≥ (–°—Å—ã–ª–∫–∞ –Ω–∞ `mpa_rate`)

#### üë• `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `user_id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á)
- `email` - –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)
- `login` - –õ–æ–≥–∏–Ω (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- `name` - –ò–º—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)
- `birthday` - –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)

#### ‚ù§Ô∏è `films_likes` - –õ–∞–π–∫–∏ —Ñ–∏–ª—å–º–æ–≤
- `film_id` + `user_id` - –°–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- –§–∏–∫—Å–∏—Ä—É–µ—Ç, –∫–∞–∫–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ª–∞–π–∫–Ω—É–ª–∏ –∫–∞–∫–∏–µ —Ñ–∏–ª—å–º—ã

#### üë´ `users_friends` - –î—Ä—É–∑—å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `user_id` + `friend_id` - –°–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- –†–µ–∞–ª–∏–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –¥—Ä—É–∂–±—ã

#### üé≠ `genres` - –ñ–∞–Ω—Ä—ã —Ñ–∏–ª—å–º–æ–≤
- `genre_id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∂–∞–Ω—Ä–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –∂–∞–Ω—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ö–æ–º–µ–¥–∏—è", "–£–∂–∞—Å—ã")

#### üîû `mpa_rate` - –í–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∏
- `mpa_id` - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–µ–π—Ç–∏–Ω–≥–∞
- `name` - –ö–æ–¥ —Ä–µ–π—Ç–∏–Ω–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "G", "PG-13")

#### üè∑Ô∏è `films_genres` - –°–≤—è–∑—å —Ñ–∏–ª—å–º–æ–≤ –∏ –∂–∞–Ω—Ä–æ–≤
- `film_id` + `genre_id` - –°–æ—Å—Ç–∞–≤–Ω–æ–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ñ–∏–ª—å–º–∞–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∂–∞–Ω—Ä–æ–≤

### üîó –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏
1. –§–∏–ª—å–º—ã ‚Üî –õ–∞–π–∫–∏: –û–¥–∏–Ω-–∫–æ-–º–Ω–æ–≥–∏–º (–û–¥–∏–Ω —Ñ–∏–ª—å–º –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –º–Ω–æ–≥–æ –ª–∞–π–∫–æ–≤)
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Üî –î—Ä—É–∑—å—è: –ú–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º (–ß–µ—Ä–µ–∑ —Å–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É `users_friends`)
3. –§–∏–ª—å–º—ã ‚Üî –ñ–∞–Ω—Ä—ã: –ú–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º (–ß–µ—Ä–µ–∑ —Å–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É `films_genres`)
4. –§–∏–ª—å–º—ã ‚Üí –†–µ–π—Ç–∏–Ω–≥–∏: –ú–Ω–æ–≥–∏–µ-–∫-–æ–¥–Ω–æ–º—É (–ö–∞–∂–¥—ã–π —Ñ–∏–ª—å–º –∏–º–µ–µ—Ç –æ–¥–∏–Ω –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π —Ä–µ–π—Ç–∏–Ω–≥)

### üìä –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑—É–µ—Ç:
- –ö–∞—Ç–∞–ª–æ–≥ —Ñ–∏–ª—å–º–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ—Ü–µ–Ω–æ–∫
- –°–∏—Å—Ç–µ–º—É –¥—Ä—É–∑–µ–π –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
  - "–°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ–∏–ª—å–º—ã –ø–æ –∂–∞–Ω—Ä–∞–º"
  - "–õ—é–±–∏–º—ã–µ —Ñ–∏–ª—å–º—ã –¥—Ä—É–∑–µ–π"
  - "–§–∏–ª—å–º—ã, –≤—ã—à–µ–¥—à–∏–µ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ —Å –∑–∞–¥–∞–Ω–Ω—ã–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º"


### –ü—Ä–∏–º–µ—Ä—ã SQL-–∑–∞–ø—Ä–æ—Å–æ–≤
```sql
-- –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø-5 —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤
SELECT f.*, COUNT(fl.user_id) AS likes_count
FROM films f
LEFT JOIN films_likes fl ON f.film_id = fl.film_id
GROUP BY f.film_id
ORDER BY likes_count DESC
LIMIT 5;

-- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ª–∞–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT f.* 
FROM films f
JOIN films_likes fl ON f.film_id = fl.film_id
WHERE fl.user_id = 1;

-- –§–∏–ª—å–º—ã –ø–æ –∂–∞–Ω—Ä—É —Å —Ä–µ–π—Ç–∏–Ω–≥–æ–º
SELECT f.*, m.name AS mpa_rating
FROM films f
JOIN mpa_rate m ON f.mpa_rate = m.mpa_id
JOIN films_genres fg ON f.film_id = fg.film_id
JOIN genres g ON fg.genre_id = g.genre_id
WHERE g.name = '–ö–æ–º–µ–¥–∏—è'
ORDER BY f.release_date DESC;

-- –û–±—â–∏–µ –¥—Ä—É–∑—å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π 1 –∏ 2
SELECT u.*
FROM users u
JOIN users_friends uf1 ON u.user_id = uf1.friend_id
JOIN users_friends uf2 ON u.user_id = uf2.friend_id
WHERE uf1.user_id = 1 AND uf2.user_id = 2;
